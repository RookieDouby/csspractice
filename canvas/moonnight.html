<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Moonnight Demo</title>
    <style>
        canvas {
            display: block;
            border: 1px dotted skyblue;
        }
    </style>
</head>
<body>
    <canvas id="canvas" width="500" height="400"></canvas>
    <script>
        var nimo = {};
        window.onload = function () {
            nimo.canvas = document.getElementById('canvas');
            nimo.context = nimo.canvas.getContext('2d');

            nimo.starBgImg = new Image();
            nimo.starBgImg.src = "http://sandbox.runjs.cn/uploads/rs/167/znddwgfj/star-bg.jpg";
            nimo.starBgImg.onload = function () {
                //fill stars bg
                nimo.statBg = nimo.context.createPattern(nimo.starBgImg,'repeat');
                nimo.context.rect(0,0,nimo.canvas.width,nimo.canvas.height);
                nimo.context.fillStyle = nimo.statBg;
                nimo.context.fill();

                // draw outline of moon
                nimo.context.beginPath();
                nimo.context.arc(200, 200, 100, 0.6*Math.PI, 1.3*Math.PI);
                nimo.context.bezierCurveTo(140,119,93,224,169,295);

                //fill moon outline and set projection
                nimo.context.shadowColor = "blue";
                nimo.context.shadowBlur = 3;
                nimo.context.strokeStyle = "blue";
                nimo.context.stroke();

                //fill radiate for moon
                nimo.radialGradient = nimo.context.createRadialGradient(150,200,0,150,200,50);
                nimo.radialGradient.addColorStop(0, 'white');
                nimo.radialGradient.addColorStop(1,'#999')
                nimo.context.fillStyle = nimo.radialGradient;
                nimo.context.fill();

                //draw eyes and mouse of moon
                nimo.context.shadowColor = "white";
                nimo.context.beginPath();
                nimo.context.moveTo(110, 173);
                nimo.context.lineTo(114, 173);
                nimo.context.moveTo(119, 173);
                nimo.context.lineTo(123, 173);
                nimo.context.stroke();

                nimo.context.beginPath();
                nimo.context.arc(116,183,2,0,2*Math.PI);
                nimo.context.stroke();
                nimo.context.shadowColor = 'transparent';
                nimo.context.font = '16px Microsoft Black';
                nimo.context.fillText("Canvas Moon Night Demo!",300,300);
            }
        }
    </script>
</body>
</html>